TOP_DIR = $(shell find $(realpath ./tb/) -name "$(TOP).sv" | sed "s/$(TOP).sv//g")
DES_LIB_CMP = $(shell find $(realpath ./cmp/) -name "*.sv")
TBF_LIB_CMP = $(shell find $(TOP_DIR) -name "*.sv")
INC_DIR = $(realpath ./include)

.PHONY: vivado
vivado: elaborate
	@xsim top -runall

.PHONY: elaborate
elaborate: compile
	@xelab $(TOP) -s top

.PHONY: compile
compile:
	@xvlog -i $(INC_DIR) -sv $(TOP_DIR)$(TOP).sv -L UVM -L TBF=$(TBF_LIB_CMP) -L CMP=$(DES_LIB_CMP)